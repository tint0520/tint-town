<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tint Maps ç¾æ¥­åœ°åœ– App</title>

  <!-- å­—å‹èˆ‡æ¡†æ¶ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"/>
  <link rel="manifest" href="./manifest.json">
  
  <style>
    html, body { height: 100%; margin: 0; padding: 0; font-family: 'Noto Sans TC', sans-serif; }

    #map-view, #card-view, #favorite-view { display: none; height: calc(100% - 110px); }
    #card-view { background-color: #fff3f7; }

    .top-banner { width: 100%; height: 85px; background-color: #ffecf2; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .banner-text { font-size: 26px; color: #d63384; font-weight: bold; }
    .banner-subtext { font-size: 16px; color: #888; }

    .map-btn { color: #0d6efd; cursor: pointer; text-decoration: underline; }
    .map-btn:hover { color: #0a58ca; }

    .store-info p { margin-bottom: 6px; }
    .store-distance { position: relative; margin-top: 14px; padding-bottom: 12px; font-size: 14px; color: #888; text-align: left; padding-left: 15px; }

    #bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 60px; background: white; display: flex; border-radius: 15px 15px 0 0; box-shadow: 0 -3px 10px rgba(0,0,0,0.15); z-index: 10; }
    .nav-btn { flex: 1; padding: 10px; text-align: center; color: #555; font-size:14px; }

    .swiper-container { height: 50%; padding-top: 20px; }
    .swiper-slide { width: 82%; border-radius: 18px; box-shadow: 0 1.6px 6.4px rgba(0,0,0,0.15); overflow-y: auto; background-color: #ffffff; }
    .swiper-slide img { height: 200px; object-fit: cover; width: 100%; }

    .store-info { padding: 25px 20px 10px 20px; font-size: 14px; line-height: 1.6; }
    .store-info h5, .store-info p { padding-left: 10px; }
    .store-info p:last-child { text-align: center; }

    .store-distance { text-align: center; padding-left: 0; }

    .store-info a { margin-right: 8px; }
    .favorite-btn { position: absolute; top: 10px; right: 10px; cursor: pointer; font-size: 24px; color: #ffd700; text-shadow: 0 1px 3px rgba(0,0,0,0.2); z-index: 5; }

    /* æ­¡è¿ç•«é¢æ¨£å¼ */
    #splash-screen {
      position: fixed;
      z-index: 9999;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #ffecf2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .loader {
      width: 24px;
      height: 24px;
      border: 3px solid #fff;
      border-top: 3px solid #d63384;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>

  <!-- è¼‰å…¥å‡½å¼åº« -->
  <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLCB3EKFwsIqPwEEL_hxL7zluVpnzcCNM&callback=initMap"></script>
</head>
<body>

<!-- æ­¡è¿ç•«é¢ -->
<div id="splash-screen">
  <img src="icon-192.png" alt="Tint Maps Logo" style="width:100px; height:100px; margin-bottom:20px;" />
  <div class="loader"></div>
  <p style="color:#d63384;margin-top:16px;">è¼‰å…¥è³‡æ–™ä¸­â€¦</p>
</div>

<!-- é é¦–å€ -->
<div class="top-banner">
  <div class="banner-text">Tint Maps</div>
  <div class="banner-subtext">æ‰¾é™„è¿‘çš„ç¾æ¥­åº—å®¶</div>
</div>

<!-- åœ°åœ– / å¡ç‰‡ / æ”¶è— å€å¡Š -->
<div id="map-view"></div>
<div id="card-view" class="swiper-container"><div class="swiper-wrapper"></div></div>
<div id="favorite-view" class="p-4">
  <h4>æˆ‘çš„æ”¶è—</h4>
  <div id="favorite-list"></div>
</div>

<!-- åº•éƒ¨å°èˆªåˆ— -->
<div id="bottom-nav">
  <div class="nav-btn" onclick="showView('map-view')">ğŸ—ºï¸<br>åœ°åœ–æ‰¾åº—</div>
  <div class="nav-btn" onclick="showView('card-view')">ğŸ“¸<br>å¡ç‰‡æ¢åº—</div>
  <div class="nav-btn" onclick="showView('favorite-view')">â¤ï¸<br>æˆ‘çš„æ”¶è—</div>
</div>

<!-- Service Worker è¨»å†Š -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js').then(reg => {
      console.log('ServiceWorker è¨»å†ŠæˆåŠŸï¼');
    }).catch(err => {
      console.log('ServiceWorker è¨»å†Šå¤±æ•—: ', err);
    });
  }

  // æ­¡è¿ç•«é¢æ·¡å‡ºæ§åˆ¶
  window.addEventListener('load', () => {
    setTimeout(() => {
      const splash = document.getElementById('splash-screen');
      if (splash) splash.style.display = 'none';
    }, 2000);
  });
</script>

<!-- ä½ åŸæœ¬çš„ä¸»é‚è¼¯ JS å»ºè­°å¯æ”¾åœ¨å¦ä¸€å€‹ script.js å¼•å…¥ï¼Œæˆ–è²¼åœ¨é€™è£¡ï¼ˆå¤ªé•·æˆ‘å°±ä¸è²¼å›ä¾†å›‰ï¼‰ -->

</body>
</html>
